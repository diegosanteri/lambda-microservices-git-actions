{"version":3,"file":"index.cjs.development.cjs","sources":["../src/util.ts","../src/index.ts"],"sourcesContent":["// @ts-ignore\nimport _equals from 'deep-eql';\nimport { IOptions } from './types';\nimport { findLastIndex, findIndex } from 'lodash';\n\nexport function equals<T>(a1: T, a2: T): boolean\nexport function equals<T>(a1: T, a2: unknown): a2 is T\nexport function equals<T>(a1: unknown, a2: T): a1 is T\nexport function equals(a1: any, a2: any): boolean\n{\n\treturn _equals(a1, a2)\n}\n\nexport function defaultFilter<T>(options: IOptions<T> = {})\n{\n\tconst checker = options.checker || defaultChecker;\n\tconst filter = options.filter || null;\n\n\tconst find = options.removeFromFirst ? findLastIndex : findIndex;\n\n\tconst cb = <K extends any[]>(val: K[keyof K], index: number, arr: K) =>\n\t{\n\t\tlet i = find(arr, a => checker(a, val, arr, arr));\n\t\treturn i == index && (!filter || filter(val));\n\t};\n\n\treturn cb;\n}\n\n// @ts-ignore\nexport function defaultChecker<T, R>(element: T, value: R, arr_new?: Array<T | R>, arr_old?: Array<T | R>): boolean\n{\n\treturn _equals(element, value);\n}\n","import { defaultFilter, equals, defaultChecker } from './util';\n\nimport { IOptions } from './types';\n\nexport * from './types';\nexport * from './util';\n\nexport function array_unique<T>(arr: T, options: IOptions<T> = {}): T\n{\n\tif (!Array.isArray(arr))\n\t{\n\t\tthrow new TypeError(`Expected an Array but got ${typeof arr}.`)\n\t}\n\n\tconst cb = defaultFilter(options);\n\n\tif (options.overwrite)\n\t{\n\t\tlet index = arr.length;\n\n\t\twhile (index--)\n\t\t{\n\t\t\tlet val = arr[index];\n\n\t\t\tif (!cb(val, index, arr))\n\t\t\t{\n\t\t\t\tarr.splice(index, 1);\n\t\t\t}\n\t\t}\n\n\t\treturn arr;\n\t}\n\n\t// @ts-ignore\n\treturn arr.filter(cb);\n}\n\nexport function array_unique_overwrite<T>(arr: T, options: IOptions<T> = {}): T\n{\n\treturn array_unique(arr, {\n\t\t...options,\n\t\toverwrite: true,\n\t});\n}\n\nexport function lazy_unique<T extends any[]>(arr: T): T\nexport function lazy_unique<T, T1, T2>(a1: T1, a2: T2, ...arr: T[]): Array<T | T1 | T2>\nexport function lazy_unique<T>(...arr: Array<T | T[]>): T | (T | T[])[]\n// @ts-ignore\nexport function lazy_unique<T>(...arr: Array<T | T[]>)\n{\n\tif (arr.length > 1)\n\t{\n\t\treturn array_unique(arr);\n\t}\n\n\treturn array_unique(arr[0]);\n}\n\nexport function lazy_unique_overwrite<T>(...arr: Array<T | T[]>)\n{\n\tif (arr.length > 1)\n\t{\n\t\treturn array_unique_overwrite(arr);\n\t}\n\n\treturn array_unique_overwrite(arr[0]);\n}\n\nlazy_unique.array_unique = array_unique;\nlazy_unique.array_unique_overwrite = array_unique_overwrite;\n\nlazy_unique.lazy_unique_overwrite = lazy_unique_overwrite;\n\nlazy_unique.equals = equals;\nlazy_unique.defaultFilter = defaultFilter;\nlazy_unique.defaultChecker = defaultChecker;\n\nlazy_unique.lazy_unique = lazy_unique;\nlazy_unique.default = lazy_unique;\n\nObject.defineProperty(lazy_unique, \"__esModule\", { value: true });\n\nexport default lazy_unique\n"],"names":["equals","a1","a2","_equals","defaultFilter","options","checker","defaultChecker","filter","find","removeFromFirst","findLastIndex","findIndex","cb","val","index","arr","i","a","element","value","arr_new","arr_old","array_unique","Array","isArray","TypeError","overwrite","length","splice","array_unique_overwrite","lazy_unique","lazy_unique_overwrite","default","Object","defineProperty"],"mappings":"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"}