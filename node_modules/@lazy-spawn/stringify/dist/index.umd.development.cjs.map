{"version":3,"file":"index.umd.development.cjs","sources":["../src/index.ts"],"sourcesContent":["/**\n * Created by user on 2022/4/6.\n */\nimport { SpawnSyncReturns } from 'cross-spawn-extra/core';\nimport { crlf } from 'crlf-normalize';\nimport { stripAnsiValue } from '@lazy-spawn/strip-ansi';\nimport { ITSValueOrArray } from 'ts-type/lib/type/base';\n\nexport function crossSpawnOutput(buf: SpawnSyncReturns[\"output\"] | ITSValueOrArray<Buffer | string>, options: {\n\tclearEol?: boolean,\n\tstripAnsi?: boolean,\n} = {\n\tclearEol: true,\n}): string\n{\n\tlet output = '';\n\n\tif (!Buffer.isBuffer(buf) && Array.isArray(buf))\n\t{\n\t\toutput = buf\n\t\t\t.filter(function (b)\n\t\t\t{\n\t\t\t\treturn !(!b || !b.length)\n\t\t\t})\n\t\t\t.map(function (b)\n\t\t\t{\n\t\t\t\treturn b.toString();\n\t\t\t})\n\t\t\t.join(\"\\n\")\n\t}\n\telse\n\t{\n\t\toutput = (buf || '').toString();\n\t}\n\n\tif (options.stripAnsi)\n\t{\n\t\toutput = stripAnsiValue(output);\n\t}\n\n\toutput = crlf(output);\n\n\tif (options.clearEol || options.clearEol == null)\n\t{\n\t\toutput = output.replace(/\\n+$/g, '');\n\t}\n\n\treturn output;\n}\n\nexport default crossSpawnOutput\n"],"names":["clearEol","buf","Array","output","filter","b","map","toString"],"mappings":";;;;;;;CAaCA,EAAAA,QAAAA,EAAAA,IAAAA;;aAOS;;CAMN,EAAA,IAAA,CAAA,MAAA,CAAA,QAAA,CAAAC,GAAA,CAAA,IAAAC,kBAAA,EAAA;CACDC,IAAAA,MAAAA,GAAAA,GAAAA,CAEDC,MAFC,CAED,UAAA,CAAA,EAAA;cAGM,EAAO,CAAA,CAAA,IAAA,CAAIC,QAAX;MALL,CAUDC,CAAAA,GAVC,CAUD,UAAAD,CAAA,EAAS;OAGV,OAASA,CAAA,CAAAE,QAAA,EAAT,CAAA;MAbE,CAAA,KAAA,CAiBD,IAjBC,CAAA,CAAA;IADC,MAsBH;CAED,IAAA,MAAA,GAAA,CAAAN,GAAAA,IAAA,EAAA,EAAAM,QAAA,EAAA,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;"}