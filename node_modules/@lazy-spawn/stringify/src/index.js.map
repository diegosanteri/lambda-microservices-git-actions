{"version":3,"file":"index.js","sourceRoot":"","sources":["index.ts"],"names":[],"mappings":";;;AAIA,mDAAsC;AACtC,uDAAwD;AAGxD,SAAgB,gBAAgB,CAAC,GAAkE,EAAE,UAGjG;IACH,QAAQ,EAAE,IAAI;CACd;IAEA,IAAI,MAAM,GAAG,EAAE,CAAC;IAEhB,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,EAC/C;QACC,MAAM,GAAG,GAAG;aACV,MAAM,CAAC,UAAU,CAAC;YAElB,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,CAAA;QAC1B,CAAC,CAAC;aACD,GAAG,CAAC,UAAU,CAAC;YAEf,OAAO,CAAC,CAAC,QAAQ,EAAE,CAAC;QACrB,CAAC,CAAC;aACD,IAAI,CAAC,IAAI,CAAC,CAAA;KACZ;SAED;QACC,MAAM,GAAG,CAAC,GAAG,IAAI,EAAE,CAAC,CAAC,QAAQ,EAAE,CAAC;KAChC;IAED,IAAI,OAAO,CAAC,SAAS,EACrB;QACC,MAAM,GAAG,IAAA,2BAAc,EAAC,MAAM,CAAC,CAAC;KAChC;IAED,MAAM,GAAG,IAAA,qBAAI,EAAC,MAAM,CAAC,CAAC;IAEtB,IAAI,OAAO,CAAC,QAAQ,IAAI,OAAO,CAAC,QAAQ,IAAI,IAAI,EAChD;QACC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;KACrC;IAED,OAAO,MAAM,CAAC;AACf,CAAC;AAxCD,4CAwCC;AAED,kBAAe,gBAAgB,CAAA","sourcesContent":["/**\n * Created by user on 2022/4/6.\n */\nimport { SpawnSyncReturns } from 'cross-spawn-extra/core';\nimport { crlf } from 'crlf-normalize';\nimport { stripAnsiValue } from '@lazy-spawn/strip-ansi';\nimport { ITSValueOrArray } from 'ts-type/lib/type/base';\n\nexport function crossSpawnOutput(buf: SpawnSyncReturns[\"output\"] | ITSValueOrArray<Buffer | string>, options: {\n\tclearEol?: boolean,\n\tstripAnsi?: boolean,\n} = {\n\tclearEol: true,\n}): string\n{\n\tlet output = '';\n\n\tif (!Buffer.isBuffer(buf) && Array.isArray(buf))\n\t{\n\t\toutput = buf\n\t\t\t.filter(function (b)\n\t\t\t{\n\t\t\t\treturn !(!b || !b.length)\n\t\t\t})\n\t\t\t.map(function (b)\n\t\t\t{\n\t\t\t\treturn b.toString();\n\t\t\t})\n\t\t\t.join(\"\\n\")\n\t}\n\telse\n\t{\n\t\toutput = (buf || '').toString();\n\t}\n\n\tif (options.stripAnsi)\n\t{\n\t\toutput = stripAnsiValue(output);\n\t}\n\n\toutput = crlf(output);\n\n\tif (options.clearEol || options.clearEol == null)\n\t{\n\t\toutput = output.replace(/\\n+$/g, '');\n\t}\n\n\treturn output;\n}\n\nexport default crossSpawnOutput\n"]}