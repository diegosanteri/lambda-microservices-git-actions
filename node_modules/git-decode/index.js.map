{"version":3,"file":"index.js","sourceRoot":"","sources":["index.ts"],"names":[],"mappings":";AAAA;;GAEG;;;;AAEH,oEAAiC;AACjC,qCAAyC;AAEzC,SAAgB,MAAM,CAAC,CAAS;IAE/B,OAAO,oBAAO,CAAC,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC;SACzB,GAAG,CAAC,UAAU,CAAC;QAEd,IAAI,CAAC,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QAEvB,IAAI,CAAC,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,EACnD;YACC,IAAI,CAAC,GAAG,EAAE,CAAC;YAEX,KAAK,IAAI,CAAC,IAAI,CAAC,CAAC,OAAO,EAAE,EACzB;gBACC,CAAC,GAAG,CAAC,GAAG,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;aAChC;YAED,OAAO,CAAC,CAAC;SACT;QAED,OAAO,CAAC,CAAC;IACV,CAAC,CACD;SACA,IAAI,CAAC,EAAE,CAAC,CACR;AACH,CAAC;AAxBD,wBAwBC;AAED,SAAgB,MAAM,CAAC,CAAS;IAE/B,IAAI,OAAO,GAAG,EAAE,CAAC;IAEjB,IAAI,CAAC,GAAG,EAAE,CAAC;IACX,IAAI,EAAE,GAAG,CAAC,EACP,CAAC,GAAG,EAAE,CACR;IAED,IAAI,GAAG,CAAC;IACR,IAAI,CAAC,GAAG,gBAAgB,CAAC;IAEzB,OAAO,GAAG,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EACtB;QACC,8BAA8B;QAE9B;;;;WAIG;QAEH,IAAI,EAAE,IAAI,GAAG,CAAC,KAAK,EACnB;YAEC,IAAI,CAAC,CAAC,MAAM,EACZ;gBACC,CAAC,IAAI,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC;gBAC/B,CAAC,GAAG,EAAE,CAAC;aACP;YAED,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,EAAE,EAAE,GAAG,CAAC,KAAK,GAAG,EAAE,CAAC,CAAC;SAClC;QAED,iCAAiC;QACjC,EAAE,GAAG,CAAC,CAAC,SAAS,CAAC;QAEjB,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;KAC5B;IAED,sBAAsB;IAEtB,IAAI,CAAC,CAAC,MAAM,EACZ;QACC,CAAC,IAAI,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC;QAC/B,CAAC,GAAG,EAAE,CAAC;KACP;IAED,IAAI,EAAE,GAAG,CAAC,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC,MAAM,EAC5B;QACC,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,EAAE,EAAE,CAAC,CAAC,MAAM,GAAG,EAAE,CAAC,CAAC;KACjC;IAED,OAAO,CAAC,CAAC;AACV,CAAC;AAtDD,wBAsDC;AAED,SAAgB,OAAO,CAAC,KAAa;IAEpC,IAAI,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,EAC/B;QACC,KAAK,GAAE,MAAM,CAAC,KAAK,CAAC,CAAC;KACrB;IAED,OAAO,IAAA,kBAAW,EAAC,KAAK,CAAC,CAAC;AAC3B,CAAC;AARD,0BAQC;AAED,kBAAe,OAAmC,CAAC","sourcesContent":["/**\n * Created by user on 2018/5/15/015.\n */\n\nimport UString from 'uni-string';\nimport { removeQuote } from './lib/util';\n\nexport function encode(s: string)\n{\n\treturn UString.split(s, '')\n\t\t.map(function (v)\n\t\t\t{\n\t\t\t\tlet s = Buffer.from(v);\n\n\t\t\t\tif (s.length > 1 || (s.length == 1 && s[0] >= 0x7F))\n\t\t\t\t{\n\t\t\t\t\tlet t = '';\n\n\t\t\t\t\tfor (let b of s.entries())\n\t\t\t\t\t{\n\t\t\t\t\t\tt = t + '\\\\' + b[1].toString(8);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn t;\n\t\t\t\t}\n\n\t\t\t\treturn v;\n\t\t\t}\n\t\t)\n\t\t.join('')\n\t\t;\n}\n\nexport function decode(s: string)\n{\n\tlet matches = [];\n\n\tlet t = '';\n\tlet i2 = 0\n\t\t, b = []\n\t;\n\n\tlet arr;\n\tlet r = /(?:\\\\(\\d{3}))/g;\n\n\twhile (arr = r.exec(s))\n\t{\n\t\t//let extras = arr.splice(-2);\n\n\t\t/*\n\t\t arr.i2 = i2;\n\t\t arr.lastIndex = r.lastIndex;\n\t\t console.log([arr, s.length, t, b, s.substr(i2, arr.index)]);\n\t\t */\n\n\t\tif (i2 != arr.index)\n\t\t{\n\n\t\t\tif (b.length)\n\t\t\t{\n\t\t\t\tt += Buffer.from(b).toString();\n\t\t\t\tb = [];\n\t\t\t}\n\n\t\t\tt += s.substr(i2, arr.index - i2);\n\t\t}\n\n\t\t//i2 = arr.index + arr[0].length;\n\t\ti2 = r.lastIndex;\n\n\t\tb.push(parseInt(arr[1], 8));\n\t}\n\n\t//console.log([t, b]);\n\n\tif (b.length)\n\t{\n\t\tt += Buffer.from(b).toString();\n\t\tb = [];\n\t}\n\n\tif (i2 > -1 && i2 < s.length)\n\t{\n\t\tt += s.substr(i2, s.length - i2);\n\t}\n\n\treturn t;\n}\n\nexport function decode2(input: string): string\n{\n\tif (/(?:\\\\(\\d{3}))/.test(input))\n\t{\n\t\tinput= decode(input);\n\t}\n\n\treturn removeQuote(input);\n}\n\nexport default exports as typeof import('./index');\n"]}